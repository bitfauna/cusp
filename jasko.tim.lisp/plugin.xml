<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin
	id="jasko.tim.lisp"
	name="Cusp"
	version="0.8.0"
	class="jasko.tim.lisp.LispPlugin">

	<runtime>
		<library name="cusp.jar" />
	</runtime>
	<requires>
		<import plugin="org.eclipse.core.runtime"/>
		<import plugin="org.eclipse.jface.text"/>
		<import plugin="org.eclipse.ui"/>
		<import plugin="org.eclipse.ui.editors"/>
		<import plugin="org.eclipse.ui.views"/>
		<import plugin="org.eclipse.ui.browser"/>
		<import plugin="org.eclipse.ui.ide"/>
		<import plugin="org.eclipse.ui.workbench.texteditor"/>
		<import plugin="org.eclipse.ui.console"/>
		<import plugin="org.eclipse.debug.core"/>
		<import plugin="org.eclipse.core.resources"/>
	</requires>

	<!-- Lisp Perspective -->
	<extension point="org.eclipse.ui.perspectives">
		<perspective
        class="jasko.tim.lisp.perspective.LispPerspectiveFactory"
        fixed="false"
        icon="icons/lispFile.gif"
        id="jasko.tim.lisp.perspective.LispPerspectiveFactory"
        name="Lisp">
		</perspective>
	</extension>
	
	

	<!-- Builder for lisp files -->
	<!-- Currently, it only checks for basic mismatched parentheses-->
	<extension point="org.eclipse.core.resources.builders"
		id="lispBuilder"
		name="Lisp Project Builder">
		<builder hasNature="true">
			<run class="jasko.tim.lisp.builder.LispBuilder"/>
		</builder>
	</extension>
 
 
 
	<!-- Lisp Project Nature -->
	<extension point="org.eclipse.core.resources.natures"
		id="lispNature"
		name="Lisp Project Nature">
		<runtime>
			<run class="jasko.tim.lisp.builder.LispNature"/>
		</runtime>
		<builder id="jasko.tim.lisp.lispBuilder"/>
	</extension>
 
	 <extension point="org.eclipse.ui.ide.projectNatureImages">
		<image
			id="jasko.tim.lisp.builder.LispNatureImage"
			natureId="jasko.tim.lisp.lispNature"
			icon="icons/lispNature.gif">
		</image>
	</extension>
	
	
	
	<!-- Wizards -->
	<extension point="org.eclipse.ui.newWizards">
		<category
	        id="jasko.tim.lisp.newWizards"
	        name="Lisp" />

		<wizard
			category="jasko.tim.lisp.newWizards"
			class="jasko.tim.lisp.wizards.NewLispFileWizard"
			icon="icons/lispFile.gif"
			id="jasko.tim.lisp.wizards.NewLispFileWizard"
			name="Lisp File"
			finalPerspective="jasko.tim.lisp.perspective.LispPerspectiveFactory"
			preferredPerspectives="jasko.tim.lisp.perspective.LispPerspectiveFactory">
			<selection class="org.eclipse.core.resources.IResource"/>
		</wizard>

		<wizard
			category="jasko.tim.lisp.newWizards"
			class="jasko.tim.lisp.wizards.NewProjectWiz"
			finalPerspective="jasko.tim.lisp.perspective.LispPerspectiveFactory"
			icon="icons/lispFile.gif"
			id="jasko.tim.lisp.wizards.NewProjectWiz"
			name="Lisp Project"
			preferredPerspectives="jasko.tim.lisp.perspective.LispPerspectiveFactory"
			project="true">
			<selection class="org.eclipse.core.resources.IResource"/>
		</wizard>
	</extension>
	
	
	<!-- Navigator popup menu items -->
	<extension point="org.eclipse.ui.popupMenus">
		<objectContribution
			id="jasko.tim.lisp.wizards.actions.NewLispFileWizardAction.folder"
			objectClass="org.eclipse.core.resources.IContainer">
			<filter
				name="projectNature"
				value="jasko.tim.lisp.lispNature">
			</filter>
			<action
				id="jasko.tim.lisp.wizards.actions.NewLispFileWizardAction"
				label="New Lisp file..."
				icon="icons/lispFile.gif"
				menubarPath="new.ext"
				class="jasko.tim.lisp.wizards.actions.NewLispFileWizardAction"
				enablesFor="1">
			</action>
		</objectContribution>
	</extension>
	<!-- menubarPath="group.add" -->
	<extension point="org.eclipse.ui.popupMenus">
		<objectContribution
			id="jasko.tim.lisp.navigator.LoadAsdAction.folder"
			objectClass="org.eclipse.core.resources.IFile"
			nameFilter="*.asd">
			<action
				id="jasko.tim.lisp.navigator.LoadAsdAction"
				label="Load asd"
				icon="icons/load-asd.gif"
				menubarPath="group.add"
				class="jasko.tim.lisp.navigator.LoadAsdAction"
				enablesFor="1">
			</action>
		</objectContribution>
	</extension>
	
	<extension point="org.eclipse.ui.popupMenus">
		<objectContribution
			id="jasko.tim.lisp.navigator.LoadFileAction.folder"
			objectClass="org.eclipse.core.resources.IFile"
			nameFilter="*.lisp">
			<action
				id="jasko.tim.lisp.navigator.LoadFileAction"
				label="Load file"
				icon="icons/lispFile.gif"
				menubarPath="group.add"
				class="jasko.tim.lisp.navigator.LoadFileAction"
				enablesFor="1">
			</action>
		</objectContribution>
	</extension>
	
	<extension point="org.eclipse.ui.popupMenus">
		<objectContribution
			id="jasko.tim.lisp.wizards.actions.CleanFaslsAction.folder"
			objectClass="org.eclipse.core.resources.IProject">
			<filter
				name="projectNature"
				value="jasko.tim.lisp.lispNature">
			</filter>
			<action
				id="jasko.tim.lisp.navigator.CleanFaslsAction"
				label="Delete .fasls"
				icon="icons/clear.gif"
				menubarPath="group.add"
				class="jasko.tim.lisp.navigator.CleanFaslsAction"
				enablesFor="1">
			</action>
		</objectContribution>
	</extension>
	
	
	
	<!-- The marker for problems in lisp files -->
	<extension point="org.eclipse.core.resources.markers"
		id="lispCompile"
		name="Lisp Problem">
		<super type="org.eclipse.core.resources.problemmarker"/>
		<persistent value="true"/>
	 </extension>
	<extension point="org.eclipse.core.resources.markers"
		id="lispProblem"
		name="Lisp Problem">
		<super type="org.eclipse.core.resources.problemmarker"/>
		<persistent value="true"/>
	</extension>
	 
	<!-- Preference Page -->
	<!--<extension point="org.eclipse.ui.preferencePages">
		<page
			class="jasko.tim.lisp.preferences.LispPreferencePage"
			id="jasko.tim.lisp.preferences.LispPreferencePage"
			name="Lisp Preferences"/>
	</extension>
	<extension point="org.eclipse.core.runtime.preferences">
		<initializer class="jasko.tim.lisp.preferences.PreferenceInitializer"/>
	</extension>-->
	



	<!-- Views -->
	<extension point="org.eclipse.ui.views">
		<category
			name="Lisp"
			id="jasko.tim.lisp" />
		
		<!-- REPL view -->
		<view
	        allowMultiple="false"
	        category="jasko.tim.lisp"
	        class="jasko.tim.lisp.views.ReplView"
	        icon="icons/lispFile.gif"
	        id="jasko.tim.lisp.views.ReplView"
	        name="REPL" />
		
		<!-- Secondary REPL view -->
		<view
	        allowMultiple="true"
	        category="jasko.tim.lisp"
	        class="jasko.tim.lisp.views.SecondaryReplView"
	        icon="icons/lispFile.gif"
	        id="jasko.tim.lisp.views.SecondaryReplView"
	        name="Secondary REPL" />
		
		<!-- Apropos view -->
		<view
			name="Apropos"
			icon="icons/apropos.gif"
			category="jasko.tim.lisp"
			class="jasko.tim.lisp.views.AproposView"
			id="jasko.tim.lisp.views.AproposView" />
			
		<!-- Threads view -->
		<view
			name="Threads"
			icon="icons/threads.gif"
			category="jasko.tim.lisp"
			class="jasko.tim.lisp.views.ThreadView"
			id="jasko.tim.lisp.views.ThreadView" />
		
		<!-- Inspector view -->
		<view
			name="Inspector"
			icon="icons/inspector.gif"
			category="jasko.tim.lisp"
			class="jasko.tim.lisp.inspector.InspectorView"
			id="jasko.tim.lisp.inspector.InspectorView" />
		
		<!-- Navigator -->
		<view 
			id="jasko.tim.lisp.navigator.LispNavigator"
			name="Lisp Navigator"
			icon="icons/lispNav.gif"
			category="jasko.tim.lisp"
			class="jasko.tim.lisp.navigator.LispNavigator" />
	</extension>
	


	<!-- Decorator -->
	<extension point="org.eclipse.ui.decorators">
		<decorator
			id="jasko.tim.lisp.navigator.LispErrorDecorator"
			label="Lisp errors"
			state="true"
			class="jasko.tim.lisp.navigator.LispErrorDecorator"
			lightweight="true"
			location="BOTTOM_LEFT">
			<enablement>
				<and>
					<pluginState id="jasko.tim.lisp" value="activated"/>
					<objectClass name="org.eclipse.core.resources.IResource"/>
				</and>
			</enablement>
		</decorator>
	</extension>
	

	<!-- Lisp Editor -->
	<extension point="org.eclipse.ui.editors">
		<editor
			name="Lisp Editor"
			extensions="lisp,cl,el"
			icon="icons/lispFile.gif"
			contributorClass="org.eclipse.ui.texteditor.BasicTextEditorActionContributor"
			class="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.editors.LispEditor">
			</editor>
	</extension>
	
	<extension point="org.eclipse.ui.editors">
		<editor
			name="Lisp Editor"
			extensions="asd"
			icon="icons/asd.gif"
			contributorClass="org.eclipse.ui.texteditor.BasicTextEditorActionContributor"
			class="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.editors.AsdEditor">
			</editor>
	</extension>

	<!-- Editor Menu -->
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<menu
				id="Lisp"
				label="L&amp;isp">
				<separator name="grpDoc"/>
				<separator name="grpMacro"/>
				<separator name="grpAssist"/>
				<separator name="grpMisc"/>
				<separator name="grpCompile"/>
			</menu>
		</editorContribution>
	</extension>
	
	<!-- Profiling Menu -->
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus.profile">
			<menu
				id="Lisp.Profile"
				label="&amp;Profile">
				<separator name="grpMisc"/>
			</menu>
		</editorContribution>
	</extension>

	<!-- The Lisp editing context -->
	<extension point="org.eclipse.ui.contexts">
		<context
			id="jasko.tim.lisp.context1"
			name="Editing Lisp Source"
			parentId="org.eclipse.ui.textEditorScope"/>
	</extension>

	<!-- The REPL editing context -->
	<!-- I couldn't figure out how to register the new repl key binding scope, since the repl component is a SourceViewer,
		not a TextEditor (like LispEditor is).  So, the next/previous actions for the repl are "stuck" in the eclipse
		default "in windows" context.  I'll bet some people will choose "While editing text" or "While editing lisp",
		so this is worth fixing. -->
	<!--
	<extension point="org.eclipse.ui.contexts">
		<context
			id="jasko.tim.lisp.replcontext"
			name="REPL Interaction"
			parentId="org.eclipse.ui.contexts.window"/>
	</extension>
	-->

	<!-- last/next previous REPL command history -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Recalls the previous REPL command from history."
			id="jasko.tim.lisp.actions.PreviousREPLCommandAction"
			name="Previous REPL Command"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.PreviousREPLCommandAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Ctrl+P"/>
	</extension>
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Recalls the next REPL command from history."
			id="jasko.tim.lisp.actions.NextREPLCommandAction"
			name="Next REPL Command"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.NextREPLCommandAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Ctrl+N"/>
	</extension>

	<!-- Key bindings and all the cruft associated with them -->
	
	<!-- Compile File -->
	<extension point="org.eclipse.ui.commands">
		<category
			description="Shortcuts related to programming Lisp"
			id="jasko.tim.lisp.category1"
			name="Lisp"/>
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Compiles the file and changes focus to the REPL."
			id="jasko.tim.lisp.actions.CompileAction"
			name="Compile + Switch"/>
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Compiles the file. Does not change the focus to the REPL."
			id="jasko.tim.lisp.actions.CompileSlowAction"
			name="Compile"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.CompileAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Shift+K"/>
		<key
			commandId="jasko.tim.lisp.actions.CompileAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Ctrl+Shift+K"/>
		
		<key
			commandId="jasko.tim.lisp.actions.CompileSlowAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+K"/>
		<key
			commandId="jasko.tim.lisp.actions.CompileSlowAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Ctrl+K"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.CompileAction"
				definitionId="jasko.tim.lisp.actions.CompileAction"
				id="jasko.tim.lisp.editors.actions.CompileAction"
				label="&amp;Compile File + Switch"
				menubarPath="Lisp/grpCompile"
				tooltip="Compile file and switch to REPL.">
			</action>
			<action
				class="jasko.tim.lisp.editors.actions.CompileSlowAction"
				definitionId="jasko.tim.lisp.actions.CompileSlowAction"
				id="jasko.tim.lisp.editors.actions.CompileSlowAction"
				label="&amp;Compile File"
				menubarPath="Lisp/grpCompile"
				tooltip="Compile file, but don't switch to REPL.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Compile Top Level -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Compiles the top level form and changes focus to the REPL."
			id="jasko.tim.lisp.actions.CompileTopAction"
			name="Compile Top Level + Switch"/>
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Compiles the top level form. Does not change the focus to the REPL."
			id="jasko.tim.lisp.actions.CompileTopSlowAction"
			name="Compile Top Level"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.CompileTopAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Shift+C"/>
		<key
			commandId="jasko.tim.lisp.actions.CompileTopAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Ctrl+Shift+C"/>
			
		<key
			commandId="jasko.tim.lisp.actions.CompileTopSlowAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+C"/>
		<key
			commandId="jasko.tim.lisp.actions.CompileTopSlowAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Ctrl+C"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.CompileTopAction"
				definitionId="jasko.tim.lisp.actions.CompileTopAction"
				id="jasko.tim.lisp.editors.actions.CompileTopAction"
				label="&amp;Compile Top Level + Switch"
				menubarPath="Lisp/grpCompile"
				tooltip="Compile top-level expression and switch to REPL.">
			</action>
			<action
				class="jasko.tim.lisp.editors.actions.CompileTopSlowAction"
				definitionId="jasko.tim.lisp.actions.CompileTopSlowAction"
				id="jasko.tim.lisp.editors.actions.CompileTopSlowAction"
				label="&amp;Compile Top Level"
				menubarPath="Lisp/grpCompile"
				tooltip="Compile top-level expression, but don't switch to REPL.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Eval File -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Evaluates the current file."
			id="jasko.tim.lisp.actions.EvalFileAction"
			name="Evaluate File"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.EvalFileAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Ctrl+E"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.EvalFileAction"
				definitionId="jasko.tim.lisp.actions.EvalFileAction"
				id="jasko.tim.lisp.editors.actions.EvalFileAction"
				label="Evaluate File"
				menubarPath="Lisp/grpCompile"
				tooltip="Evaluate File">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Eval Top Level -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Evaluates the top level s-expression."
			id="jasko.tim.lisp.actions.EvalTopLevelExpAction"
			name="Eval Top-level Expression"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.EvalTopLevelExpAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+E"/>
		<key
			commandId="jasko.tim.lisp.actions.EvalTopLevelExpAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+X Ctrl+E"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.EvalTopLevelExpAction"
				definitionId="jasko.tim.lisp.actions.EvalTopLevelExpAction"
				id="jasko.tim.lisp.editors.actions.EvalTopLevelExpAction"
				label="&amp;Evaluate Top Level"
				menubarPath="Lisp/grpCompile"
				tooltip="Evaluate top-level action.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Eval Current Expression -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Evaluates the current s-expression."
			id="jasko.tim.lisp.editors.actions.EvalCurrentExpAction"
			name="Evaluate Current Expression"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.editors.actions.EvalCurrentExpAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Shift+Alt+E"/>
		<key
			commandId="jasko.tim.lisp.editors.actions.EvalCurrentExpAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+X Ctrl+E"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.EvalCurrentExpAction"
				definitionId="jasko.tim.lisp.editors.actions.EvalCurrentExpAction"
				id="jasko.tim.lisp.editors.actions.EvalCurrentExpAction"
				label="Evaluate Current Expression"
				menubarPath="Lisp/grpCompile"
				tooltip="Evaluate current expression.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Expand Selection -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Expands the selection to the next outer atom/s-expression"
			id="jasko.tim.lisp.editors.actions.ExpandSelectionAction"
			name="Expand Selection"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.editors.actions.ExpandSelectionAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Enter"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.ExpandSelectionAction"
				definitionId="jasko.tim.lisp.editors.actions.ExpandSelectionAction"
				id="jasko.tim.lisp.editors.actions.ExpandSelectionAction"
				label="Expand Selection"
				menubarPath="Lisp/grpMisc"
				tooltip="Expand Selection">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Select Current Expression -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Selects the current s-expression"
			id="jasko.tim.lisp.editors.actions.SelectCurrentExpressionAction"
			name="Select Current Expression"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.editors.actions.SelectCurrentExpressionAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Shift+Enter"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.SelectCurrentExpressionAction"
				definitionId="jasko.tim.lisp.editors.actions.SelectCurrentExpressionAction"
				id="jasko.tim.lisp.editors.actions.SelectCurrentExpressionAction"
				label="Select Current Expression"
				menubarPath="Lisp/grpMisc"
				tooltip="Select Current Expression">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Content Assist -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Shows the content-assist popup."
			id="jasko.tim.lisp.editors.actions.ContentAssistAction"
			name="Show Lisp Content Assist"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.editors.actions.ContentAssistAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Ctrl+Space"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.ContentAssistAction"
				definitionId="jasko.tim.lisp.editors.actions.ContentAssistAction"
				id="jasko.tim.lisp.editors.actions.ContentAssistAction"
				label="Show Content Assist"
				menubarPath="Lisp/grpAssist"
				tooltip="Show content assist popup">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Parameter Hints -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Shows the parameter hints popup."
			id="jasko.tim.lisp.editors.actions.ParameterHintsAction"
			name="Show Lisp Parameter Hints"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.editors.actions.ParameterHintsAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Shift+Alt+P"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.ParameterHintsAction"
				definitionId="jasko.tim.lisp.editors.actions.ParameterHintsAction"
				id="jasko.tim.lisp.editors.actions.ParameterHintsAction"
				label="Show Parameter Hints"
				menubarPath="Lisp/grpAssist"
				tooltip="Show parameter hints popup">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Profile function -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category2"
			description="Toggles profiling for the function."
			id="jasko.tim.lisp.actions.ProfileFunctionAction"
			name="Profile Function"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.ProfileFunctionAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+P"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus.profile">
			<action
				class="jasko.tim.lisp.editors.actions.ProfileFunctionAction"
				definitionId="jasko.tim.lisp.actions.ProfileFunctionAction"
				id="jasko.tim.lisp.editors.actions.ProfileFunctionAction"
				label="Profile &amp;Function"
				menubarPath="Lisp.Profile/grpMisc"
				tooltip="Profile function.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Profile report -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category2"
			description="Shows the profiling report."
			id="jasko.tim.lisp.actions.ProfileReportAction"
			name="Profile Report"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus.profile">
			<action
				class="jasko.tim.lisp.editors.actions.ProfileReportAction"
				definitionId="jasko.tim.lisp.actions.ProfileReportAction"
				id="jasko.tim.lisp.editors.actions.ProfileReportAction"
				label="Profile &amp;Report"
				menubarPath="Lisp.Profile/grpMisc"
				tooltip="Profile Report">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Reset Profiling -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category2"
			description="Resets profiling."
			id="jasko.tim.lisp.actions.ProfileResetAction"
			name="Reset Profiling"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus.profile">
			<action
				class="jasko.tim.lisp.editors.actions.ProfileResetAction"
				definitionId="jasko.tim.lisp.actions.ProfileResetAction"
				id="jasko.tim.lisp.editors.actions.ProfileResetAction"
				label="&amp;Reset profiling"
				menubarPath="Lisp.Profile/grpMisc"
				tooltip="Reset the profiler.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Undefine function -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Undefines the function."
			id="jasko.tim.lisp.actions.UndefineFunctionAction"
			name="Undefine Function"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.UndefineFunctionAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+U"/>
		<key
			commandId="jasko.tim.lisp.actions.UndefineFunctionAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Ctrl+U"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.UndefineFunctionAction"
				definitionId="jasko.tim.lisp.actions.UndefineFunctionAction"
				id="jasko.tim.lisp.editors.actions.UndefineFunctionAction"
				label="&amp;Undefine Function"
				menubarPath="Lisp/grpMisc"
				tooltip="Undefine function.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Find Callers -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Finds the places where this function is called."
			id="jasko.tim.lisp.actions.FindCallersAction"
			name="Find Callers"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.FindCallersAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Shift+,"/>
		<key
			commandId="jasko.tim.lisp.actions.FindCallersAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Shift+,"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.FindCallersAction"
				definitionId="jasko.tim.lisp.actions.FindCallersAction"
				id="jasko.tim.lisp.actions.FindCallersAction"
				label="Find &amp;Callers"
				menubarPath="Lisp/grpMisc"
				tooltip="Find Callers.">
			</action>
		</editorContribution>
	</extension>
	
	
	<!-- Find Callees -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Finds the functions this function calls."
			id="jasko.tim.lisp.actions.FindCalleesAction"
			name="Find Callers"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.FindCalleesAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Shift+."/>
		<key
			commandId="jasko.tim.lisp.actions.FindCalleesAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Shift+."/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.FindCalleesAction"
				definitionId="jasko.tim.lisp.actions.FindCalleesAction"
				id="jasko.tim.lisp.actions.FindCalleesAction"
				label="Find &amp;Callees"
				menubarPath="Lisp/grpMisc"
				tooltip="Find Callees.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- LispDoc Lookup-->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Looks up the symbol in LispDoc."
			id="jasko.tim.lisp.actions.LispDocAction"
			name="LispDoc lookup"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.LispDocAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+L"/>
		<key
			commandId="jasko.tim.lisp.actions.LispDocAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Ctrl+D L"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.LispDocAction"
				definitionId="jasko.tim.lisp.actions.LispDocAction"
				id="jasko.tim.lisp.editors.actions.LispDocAction"
				label="&amp;Lispdoc"
				menubarPath="Lisp/grpDoc"
				tooltip="Look up function in LispDoc.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- HyperSpec Lookup-->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Looks up the symbol in HyperSpec."
			id="jasko.tim.lisp.actions.HyperSpecAction"
			name="HyperSpec lookup"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.HyperSpecAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+H"/>
		<key
			commandId="jasko.tim.lisp.actions.HyperSpecAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Ctrl+D H"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.HyperSpecAction"
				definitionId="jasko.tim.lisp.actions.HyperSpecAction"
				id="jasko.tim.lisp.editors.actions.HyperSpecAction"
				label="&amp;HyperSpec"
				menubarPath="Lisp/grpDoc"
				tooltip="Look up function in HyperSpec">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Find Definition -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Evaluates the top level s-expression."
			id="jasko.tim.lisp.actions.EditDefinitionAction"
			name="Edit Definition"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.EditDefinitionAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+."/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.EditDefinitionAction"
				definitionId="jasko.tim.lisp.actions.EditDefinitionAction"
				id="jasko.tim.lisp.editors.actions.EditDefinitionAction"
				label="&amp;Find Definition"
				menubarPath="Lisp/grpMisc"
				tooltip="Go to the symbol's definition.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Indent -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Indents the current selection/line."
			id="jasko.tim.lisp.actions.IndentAction"
			name="Indent line"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.IndentAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Tab"/>
	</extension>
	
	<!-- Dissassemble -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Disassembles the current function."
			id="jasko.tim.lisp.actions.DisassembleAction"
			name="Disassemble"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.DisassembleAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+D"/>
		<key
			commandId="jasko.tim.lisp.actions.DisassembleAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Alt+D"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.DisassembleAction"
				definitionId="jasko.tim.lisp.actions.DisassembleAction"
				id="jasko.tim.lisp.editors.actions.DisassembleAction"
				label="&amp;Disassemble"
				menubarPath="Lisp/grpMacro"
				tooltip="Disassembles the current function.">
			</action>
		</editorContribution>
	</extension>
	
	<!-- Macro-expand -->
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Macro-expands the current expression."
			id="jasko.tim.lisp.actions.MacroExpandAction"
			name="Macro-expand-1"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.MacroExpandAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+M"/>
		<key
			commandId="jasko.tim.lisp.actions.MacroExpandAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Enter"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.MacroExpandAction"
				definitionId="jasko.tim.lisp.actions.MacroExpandAction"
				id="jasko.tim.lisp.editors.actions.MacroExpandAction"
				label="&amp;Macroexpand-1"
				menubarPath="Lisp/grpMacro"
				tooltip="Performs a single macro-expansion on the current expression.">
			</action>
		</editorContribution>
	</extension>
	
	<extension point="org.eclipse.ui.commands">
		<command
			categoryId="jasko.tim.lisp.category1"
			description="Macro-expands the current expression."
			id="jasko.tim.lisp.actions.MacroExpandAllAction"
			name="Macro-expand all"/>
	</extension>
	<extension point="org.eclipse.ui.bindings">
		<key
			commandId="jasko.tim.lisp.actions.MacroExpandAllAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="Alt+Shift+M"/>
		<key
			commandId="jasko.tim.lisp.actions.MacroExpandAllAction"
			contextId="jasko.tim.lisp.context1"
			schemeId="org.eclipse.ui.emacsAcceleratorConfiguration"
			sequence="Ctrl+C Esc M"/>
	</extension>
	<extension point="org.eclipse.ui.editorActions">
		<editorContribution
			targetID="jasko.tim.lisp.editors.LispEditor"
			id="jasko.tim.lisp.menus">
			<action
				class="jasko.tim.lisp.editors.actions.MacroExpandAllAction"
				definitionId="jasko.tim.lisp.actions.MacroExpandAllAction"
				id="jasko.tim.lisp.editors.actions.MacroExpandAllAction"
				label="&amp;Macroexpand-all"
				menubarPath="Lisp/grpMacro"
				tooltip="Performs a full macro-expansion on the current expression.">
			</action>
		</editorContribution>
	</extension>
	 
	
	
	
	

 <!-- Remove this later --> 
 <extension point="org.eclipse.ui.popupMenus">
    <objectContribution
          adaptable="true"
          id="jasko.tim.lisp.contribution1"
          nameFilter="*"
          objectClass="org.eclipse.core.resources.IContainer">
       <action
             class="jasko.tim.lisp.builder.ToggleNatureAction"
             enablesFor="+"
             id="jasko.tim.lisp.addRemoveNatureAction"
             label="Add/Remove Lisp Nature"
             menubarPath="additions"/>
    </objectContribution>
 </extension>
 <extension
       point="org.eclipse.ui.preferencePages">
    <page
          class="jasko.tim.lisp.preferences.CuspPreferencePage"
          id="jasko.tim.lisp.preferences.CuspPreferencePage"
          name="Lisp"/>
    <page
          category="jasko.tim.lisp.preferences.CuspPreferencePage"
          class="jasko.tim.lisp.preferences.EditorPreferencePage"
          id="jasko.tim.lisp.preferences.EditorPreferencePage"
          name="Editing"/>
    <page
          category="jasko.tim.lisp.preferences.EditorPreferencePage"
          class="jasko.tim.lisp.preferences.REPLPreferencePage"
          id="jasko.tim.lisp.preferences.REPLPreferencePage"
          name="REPL"/>
    <page
          category="jasko.tim.lisp.preferences.EditorPreferencePage"
          class="jasko.tim.lisp.preferences.ColorsPreferencePage"
          id="jasko.tim.lisp.preferences.ColorsPreferencePage"
          name="Colors"/>
    <page
          category="jasko.tim.lisp.preferences.CuspPreferencePage"
          class="jasko.tim.lisp.preferences.ImplementationsPreferencePage"
          id="jasko.tim.lisp.preferences.CuspPreferencePage"
          name="Implementations"/>
 </extension>
 <extension
       point="org.eclipse.core.runtime.preferences">
    <initializer class="jasko.tim.lisp.preferences.PreferenceInitializer"/>
    <initializer class="jasko.tim.lisp.preferences.PreferenceInitializer"/>
    <initializer class="jasko.tim.lisp.preferences.PreferenceInitializer"/>
 </extension>
 
 <extension point="org.eclipse.ui.editors.annotationTypes">
    <type name="jasko.tim.lisp.editors.LispEditor.current-sexp"/>
</extension>
<extension point="org.eclipse.ui.editors.markerAnnotationSpecification">
	<specification
	    annotationType="jasko.tim.lisp.editors.LispEditor.current-sexp"
	    colorPreferenceValue="213,253,234"
	    colorPreferenceKey="jasko.tim.lisp.editors.LispEditor.current-sexp.color"
	    contributesToHeader="false"
	    overviewRulerPreferenceValue="false"
	    presentationLayer="4"
	    label="Current Lisp Expression"
	    textPreferenceValue="true"
	    textPreferenceKey="jasko.tim.lisp.editors.LispEditor.current-sexp.text"
	    highlightPreferenceKey="jasko.tim.lisp.editors.LispEditor.current-sexp.highlight"
	    highlightPreferenceValue="true"
	    textStylePreferenceKey="jasko.tim.lisp.editors.LispEditor.current-sexp.text.style"
	    textStylePreferenceValue="BOX"
	    verticalRulerPreferenceKey="jasko.tim.lisp.editors.LispEditor.current-sexp.verticalruler"
	    verticalRulerPreferenceValue="false"
	    includeOnPreferencePage="true"
	    overviewRulerPreferenceKey="jasko.tim.lisp.editors.LispEditor.current-sexp.overviewruler" />
</extension> 
</plugin>
